@{
    ViewBag.Title = "Refresh";
    Layout = null;
    var interval = ViewBag.interval;
    }

    <!DOCTYPE html>
    <html>
    <style>
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0;
            overflow: hidden;
        }

        .map {
            height: 100%;
            width: 100%;
        }

        .marker {
            position: absolute;
            height: 15px;
            width: 15px;
        }

        .app-container {
            height: 100%;
            position: relative;
        }
    </style>
    <body>
        <div class="app-container">
            <img src="~/Images/export-map-share.png" class="map" />
            <img src="~/Images/marker.png" class="marker" />
        </div>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"
                integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
                crossorigin="anonymous"></script>
        <script>
            function setLocation(value, max, min) {
                return (100 *((value + max) / (max - min)));
        }
            function positionMarker(lon, lat) {
                var latitude = setLocation(lat, 90, -90);
                var longitude = setLocation(lon, 180, -180);
                var xPos = longitude + '%';
                var yPos = latitude + '%';
                var marker = document.querySelector('.marker');
                marker.style.top = yPos;
                marker.style.left = xPos;
                console.log(xPos);
                console.log(yPos);
        }
        function getPosition() {
            $.post('@Url.Action("Position")').done(function (response) {
                var json = JSON.parse(response);
                positionMarker(json.longi, json.lati);
            })
        }
        setInterval(getPosition,@interval);
        </script>
        @RenderBody()
    </body>
</html>
